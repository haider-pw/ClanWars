/*
 
	Awkward Showcase - jQuery plugin 
	http://www.jquery.com
	http://www.awkwardgroup.com/sandbox/awkward-showcase-a-jquery-plugin
	http://demo.awkwardgroup.com/showcase
	Version: 1.1.1

	Copyright (C) 2011 Awkward Group (http://www.awkwardgroup.com)
	Licensed under Attribution-ShareAlike 3.0 Unported
	http://creativecommons.org/licenses/by-sa/3.0/

	Markup example for jQuery("#showcase").awShowcase();
 
	<div id="showcase" class="showcase">
		<!-- Each child div in #showcase represents a slide -->
		<div class="showcase-slide">
			<!-- Put the slide content in a div with the class .showcase-content -->
			<div class="showcase-content">
				<!-- If the slide contains multiple elements you should wrap them in a div with the class .showcase-content-wrapper. 
				We usually wrap even if there is only one element, because it looks better. :-) -->
				<div class="showcase-content-wrapper">
					<img src="images/01.jpg" alt="01" />
				</div>
			</div>
			<!-- Put the caption content in a div with the class .showcase-caption -->
			<div class="showcase-caption">
				The Caption
			</div>
			<!-- Put the tooltips in a div with the class .showcase-tooltips. -->
			<div class="showcase-tooltips">
				<!-- Each anchor in .showcase-tooltips represents a tooltip. The coords attribute represents the position of the tooltip. -->
				<a href="http://www.awkward.se" coords="634,130">
					<!-- The content of the anchor-tag is displayed in the tooltip. -->
					This is a tooltip that displays the anchor html in a nice way.
				</a>
				<a href="http://www.awkward.se" coords="356, 172">
					<!-- You can add multiple elements to the anchor-tag which are display in the tooltip. -->
					<img src="images/glasses.png" />
					<span style="display: block; font-weight: bold; padding: 3px 0 3px 0; text-align: center;">
						White Glasses: 500$
					</span>
				</a>
			</div>
		</div>
		<div class="showcase-slide">
			<div class="showcase-content">
				<div class="showcase-content-wrapper">
					Content...
				</div>
			</div>
		</div>
	</div>

*/

(function(a){a.fn.awShowcase=function(b){function c(c){var d=a(document.createElement("div")).attr("id","showcase-content-"+c).css("overflow","hidden").css("position","absolute").addClass("showcase-content").html(C[c]);if(!b.viewline){d.css("width",b.content_width)}if(b.fit_to_parent&&!b.viewline){d.css("left",v/2-b.content_width/2)}return d}function d(){var a=parseInt(p)+1;if(a===E&&b.continuous){a=0}else if(a===E&&!b.continuous){r=true;clearInterval(t)}if(!r){e(a,"next")}}function e(d,i){if(p!==d&&!w){var k;var l;var m=0;var o;var r=b.fit_to_parent?v/2-b.content_width/2:0;if(d>p&&i!=="previous"||i==="next"){if(b.viewline){if(p<E-1){if(!b.speed_change){w=true}n();if(b.pauseonover){window.clearInterval(t)}A=0;for(o=p+1,len=E;o<len;++o){k=S[o];A+=k.find(".showcase-content").children().width()}if(A>v){z=y;y-=S[p].find(".showcase-content").children().width()}else if($(".showcase-arrow-next").is(":visible")){z=y;y=-(x-(A+(v-A)));$(".showcase-arrow-next").fadeOut(300)}B.animate({left:y+"px"},b.transition_speed,function(){w=false});if($(".showcase-arrow-next").is(":visible")){p++}$(".showcase-arrow-previous").fadeIn(300)}}else{if(!b.speed_change){w=true}k=a(u).find("#showcase-content-"+parseInt(p));l=c(d);B.append(l);if(b.dynamic_height){l.css("height",l.find(".showcase-content").children().height())}else{l.css("height",b.content_height)}if(k.find(".showcase-content").children().height()>l.find(".showcase-content").children().height()&&b.dynamic_height){B.stop(true,true).animate({height:l.find(".showcase-content").children().height()},200);m=100}if(b.transition==="hslide"){a(k).delay(m).animate({left:-b.content_width},b.transition_speed+b.transition_delay,function(){k.remove()})}else if(b.transition==="vslide"){a(k).delay(m).animate({top:-b.content_height},b.transition_speed+b.transition_delay,function(){k.remove()})}else{a(k).delay(m).fadeOut(b.transition_speed,function(){k.remove()})}j(k,true);h(k,true);if(b.transition==="hslide"){l.css("left",v);a(l).delay(m).animate({left:r},b.transition_speed,function(){j(l);h(l);f(l)})}else if(b.transition==="vslide"){l.css("top",u.height());a(l).delay(m).animate({top:"0px"},b.transition_speed,function(){j(l);h(l);f(l)})}else{l.css("left",r);l.css("display","none");a(l).delay(m).fadeIn(b.transition_speed,function(){j(l);h(l);f(l)})}}}else if(d<p||i==="previous"){if(b.viewline){if(p!==0){if(!b.speed_change){w=true}n();if(b.pauseonover){window.clearInterval(t)}B.animate({left:z+"px"},b.transition_speed,function(){w=false});y=z;p--;if(p===0){$(".showcase-arrow-previous").fadeOut(300)}old_id=p-1;sub_width=a(S[old_id]).width();z=z+sub_width}$(".showcase-arrow-next").fadeIn(300)}else{if(!b.speed_change){w=true}k=a(u).find("#showcase-content-"+parseInt(p));l=c(d);B.append(l);if(b.dynamic_height){l.css("height",l.find(".showcase-content").children().height())}else{l.css("height",b.content_height)}if(k.find(".showcase-content").children().height()>l.find(".showcase-content").children().height()&&b.dynamic_height){B.stop(true,true).animate({height:l.find(".showcase-content").children().height()},200);m=100}if(b.transition==="hslide"){a(k).delay(m).animate({left:v+"px"},b.transition_speed+b.transition_delay,function(){j(k,true);h(k,true);k.remove()})}else if(b.transition==="vslide"){a(k).delay(m).animate({top:b.content_height+"px"},b.transition_speed+b.transition_delay,function(){j(k,true);h(k,true);k.remove()})}else{a(k).delay(m).fadeOut(b.transition_speed,function(){j(k,true);h(k,true);k.remove()})}if(b.transition==="hslide"){l.css("left","-"+b.content_width+"px");a(l).delay(m).animate({left:r},b.transition_speed,function(){j(l);h(l);f(l)})}else if(b.transition==="vslide"){l.css("top","-"+u.height()+"px");a(l).delay(m).animate({top:"0px"},b.transition_speed,function(){j(l);h(l);f(l)})}else{l.css("left",r);l.css("display","none");a(l).delay(m).fadeIn(b.transition_speed,function(){j(l);h(l);f(l)})}B.append(l)}}if(!b.viewline){q=p;p=d;if(b.thumbnails){if(p>q&&i!=="previous"||i==="next"){g("forward",true)}else if(p<q||i==="previous"){g("backward",true)}}if(b.arrows){a(u).find(".showcase-arrow-previous").unbind("click").click(function(){if(t){if(b.stoponclick){s=true}clearInterval(t)}e(p===0?E-1:parseInt(p)-1,"previous")});a(u).find(".showcase-arrow-next").unbind("click").click(function(){if(t){if(b.stoponclick){s=true}clearInterval(t)}e(p===E-1?0:parseInt(p)+1,"next")})}if(b.thumbnails){o=0;u.find(".showcase-thumbnail").each(function(){var b=a(this);b.removeClass("active");if(o===p){b.addClass("active")}o++})}if(b.show_caption==="show"){a(l).find(".showcase-caption").show()}}if(b.buttons){o=0;u.find(".showcase-button-wrapper span").each(function(){var b=a(this);b.removeClass("active");if(o===p){b.addClass("active")}o++})}if(typeof b.custom_function=="function"){b.custom_function()}}}function f(a){if(b.dynamic_height){B.stop(true,true).animate({height:a.find(".showcase-content").children().height()},200)}w=false}function g(c,d,e){var f=true;var g=l(a(F).find(".showcase-thumbnail"));if(b.thumbnails_direction==="horizontal"){g=m(a(F).find(".showcase-thumbnail"))}var h=1;if(b.thumbnails_slidex===0){b.thumbnails_slidex=H}if(d){var i=O;var j=0;while(i<0){if(b.thumbnails_direction==="horizontal"){i+=m(a(D[0]))}else{i+=l(a(D[0]))}j++}var k=j;var n=H+j-1;if(p>=k&&p<=n){f=false}var o;if(p-n>b.thumbnails_slidex){o=p-n;while(o>b.thumbnails_slidex){o-=b.thumbnails_slidex;h++}}else if(k-p>b.thumbnails_slidex){o=k-p;while(o>b.thumbnails_slidex){o-=b.thumbnails_slidex;h++}}else{h=1}}if(c==="forward"&&f){if(b.thumbnails_direction==="vertical"&&b.content_height<G+O){O-=g*b.thumbnails_slidex*h}else if(b.thumbnails_direction==="horizontal"&&b.content_width<G+O){O-=g*b.thumbnails_slidex*h}else if(p===0){if(!e){O=0}}if(b.thumbnails_direction==="horizontal"){F.animate({left:O},300)}else{F.animate({top:O},300)}}else if(f){if(O<0){O+=g*b.thumbnails_slidex*h}else if(p===E-1){if(!e){O-=g*b.thumbnails_slidex*h}}else{O=0}if(b.thumbnails_direction==="horizontal"){F.animate({left:O},300)}else{F.animate({top:O},300)}}}function h(c,d){var e=c.find(".showcase-caption");if(!d){if(b.show_caption==="onload"){e.fadeIn(300)}else if(b.show_caption==="onhover"){a(c).mouseenter(function(){e.fadeIn(300)});a(c).mouseleave(function(){e.stop(true,true).fadeOut(100)})}}else{e.stop(true,true).fadeOut(300)}}function j(c,d){c.find(".showcase-tooltips a").each(function(){if(!d){var e=a(this).attr("coords");e=e.split(",");a(this).addClass("showcase-plus-anchor");a(this).css("position","absolute");a(this).css("display","none");a(this).css("width",b.tooltip_icon_width);a(this).css("height",b.tooltip_icon_height);a(this).css("left",parseInt(e[0])-parseInt(b.tooltip_icon_width)/2);a(this).css("top",parseInt(e[1])-parseInt(b.tooltip_icon_height)/2);var f=a(this).html();a(this).mouseenter(function(){k(c,e[0],e[1],f)});a(this).mouseleave(function(){k(c,e[0],e[1],f)});a(this).html("");a(this).fadeIn(300)}else{a(this).stop(true,true).fadeOut(300)}})}function k(c,d,e,f){if(P===null){P=a(document.createElement("div")).addClass("showcase-tooltip").css("display","none").css("position","absolute").css("max-width",b.tooltip_width).html(f);c.append(P);var g=parseInt(P.css("padding-right"))*2+parseInt(P.css("border-right-width"))*2;var h=parseInt(P.css("padding-bottom"))*2+parseInt(P.css("border-bottom-width"))*2;lastx=parseInt(d)+P.width()+g;lasty=parseInt(e)+P.height()+h;if(lastx<b.content_width){P.css("left",parseInt(d)+parseInt(b.tooltip_offsetx))}else{P.css("left",parseInt(d)-parseInt(b.tooltip_offsetx)-(parseInt(P.width())+parseInt(b.tooltip_offsetx)))}if(lasty<b.content_height){P.css("top",parseInt(e)+parseInt(b.tooltip_offsety))}else{P.css("top",parseInt(e)-parseInt(b.tooltip_offsety)-(parseInt(P.height())+parseInt(h)))}P.fadeIn(400)}else{P.fadeOut(400);P.remove();P=null}}function l(b,c,d,e,f){c=typeof c!=="undefined"?c:true;d=typeof d!=="undefined"?d:true;e=typeof e!=="undefined"?e:true;f=typeof f!=="undefined"?f:true;var g=c?a(b).height():0;var h=d?parseFloat(a(b).css("margin-top"))+parseFloat(a(b).css("margin-bottom")):0;var i=e?parseFloat(a(b).css("padding-top"))+parseFloat(a(b).css("padding-bottom")):0;var j=f?parseFloat(a(b).css("border-top-width"))+parseFloat(a(b).css("border-bottom-width")):0;g+=h+i+j;return g}function m(b,c,d,e,f){c=typeof c!=="undefined"?c:true;d=typeof d!=="undefined"?d:true;e=typeof e!=="undefined"?e:true;f=typeof f!=="undefined"?f:true;var g=c?a(b).width():0;var h=d?parseFloat(a(b).css("margin-left"))+parseFloat(a(b).css("margin-right")):0;var i=e?parseFloat(a(b).css("padding-left"))+parseFloat(a(b).css("padding-right")):0;var j=f?parseFloat(a(b).css("border-left-width"))+parseFloat(a(b).css("border-right-width")):0;g+=h+i+j;return g}function n(){x=0;B.children("div").each(function(){x+=$(this).find(".showcase-content").children().width();S.push($(this))})}var o={content_width:700,content_height:500,fit_to_parent:false,auto:false,interval:3e3,continuous:false,loading:true,tooltip_width:200,tooltip_icon_width:32,tooltip_icon_height:32,tooltip_offsetx:18,tooltip_offsety:0,arrows:true,buttons:true,btn_numbers:false,keybord_keys:false,mousetrace:false,pauseonover:true,stoponclick:true,transition:"hslide",transition_delay:300,transition_speed:500,show_caption:"onload",thumbnails:false,thumbnails_position:"outside-last",thumbnails_direction:"vertical",thumbnails_slidex:0,dynamic_height:false,speed_change:false,viewline:false,fullscreen_width_x:15,custom_function:function(){$(".showcase-caption .star").raty({half:true,start:3})}};b=a.extend(o,b);var p=0;var q=0;var r=false;var s=false;var t=null;var u=a(this);var v=b.content_width;var w=false;var x=1e4;var y=0;var z=0;var A=0;var B=a(document.createElement("div")).css("overflow","hidden").css("position","relative").addClass("showcase-content-container").prependTo(u);if(b.fit_to_parent){v=a(u).width()+b.fullscreen_width_x}if(b.viewline){b.thumbnails=false;b.dynamic_height=false;B.css("width",x);u.css("overflow","hidden");$(".showcase-arrow-previous").hide()}var C=[];var D=[];var E=0;u.children(".showcase-slide").each(function(){var d=a(this);E++;if(b.thumbnails){var e=d.find(".showcase-thumbnail");D.push(e);e.remove()}var f=d.find(".showcase-content").children().width();var g=d.find(".showcase-content").children().height();C.push(d.html());d.remove();var i=c(E-1);if(b.viewline||E===1){B.append(i)}if(b.viewline){i.css("position","relative");i.css("float","left");i.css("width",f)}if(b.dynamic_height){i.css("height",g);if(E===1){B.css("height",g)}}else{i.css("height",b.content_height);if(E===1){B.css("height",b.content_height)}}if(b.viewline||E===1){j(i);h(i);if(b.show_caption==="show"){a(i).find(".showcase-caption").show()}}});var F;var G=0;var H=0;if(b.thumbnails){thumb_container=a("<div />");thumb_restriction=a("<div />");F=a("<div />");for(i=D.length-1;i>=0;--i){var I=a(D[i]).css({overflow:"hidden"});I.attr("id","showcase-thumbnail-"+i);I.addClass(i===0?"active":"");I.click(function(a,b){return function(){if(t){s=true;clearInterval(t)}e(a,b)}}(i,""));F.prepend(I)}if(b.thumbnails_position==="outside-first"||b.thumbnails_position==="outside-last"){if(b.thumbnails_direction!=="horizontal"){B.css("float","left");B.css("width",b.content_width);thumb_container.css("float","left");thumb_container.css("height",b.content_height)}else{a(F).find(".showcase-thumbnail").css("float","left")}if(b.thumbnails_position==="outside-last"){u.append(thumb_container);if(b.thumbnails_direction!=="horizontal"){u.append(a("<div />").addClass("clear"))}}else{u.prepend(thumb_container);if(b.thumbnails_direction!=="horizontal"){u.append(a("<div />").addClass("clear"))}}}else{thumb_container.css({position:"absolute","z-index":20});if(b.thumbnails_direction==="horizontal"){thumb_container.css({left:0,right:0});a(F).find(".showcase-thumbnail").css("float","left");a(F).append(a("<div />").addClass("clear"));if(b.thumbnails_position==="inside-first"){thumb_container.css("top",0)}else{thumb_container.css("bottom",0)}}else{thumb_container.css({top:0,bottom:0});if(b.thumbnails_position==="inside-first"){thumb_container.css("left",0)}else{thumb_container.css("right",0)}}B.prepend(thumb_container)}thumb_container.addClass("showcase-thumbnail-container");thumb_container.css("overflow","hidden");thumb_restriction.addClass("showcase-thumbnail-restriction");thumb_restriction.css({overflow:"hidden",position:"relative"});if(b.thumbnails_direction==="horizontal"){thumb_restriction.css({"float":"left"})}F.addClass("showcase-thumbnail-wrapper");if(b.thumbnails_direction==="horizontal"){F.addClass("showcase-thumbnail-wrapper-horizontal")}else{F.addClass("showcase-thumbnail-wrapper-vertical")}F.css("position","relative");thumb_restriction.append(F);thumb_container.append(thumb_restriction);var J=a('<div class="showcase-thumbnail-button-backward" />');if(b.thumbnails_direction!=="horizontal"){J.html('<span class="showcase-thumbnail-vertical"><span>Up</span></span>')}else{J.css({"float":"left"});J.html('<span class="showcase-thumbnail-horizontal"><span>Left</span></span>')}J.click(function(){g("backward",false,true)});thumb_container.prepend(J);var K=a('<div class="showcase-thumbnail-button-forward" />');if(b.thumbnails_direction!=="horizontal"){K.html('<span class="showcase-thumbnail-vertical"><span>Down</span></span>')}else{K.css({"float":"left"});K.html('<span class="showcase-thumbnail-horizontal"><span>Right</span></span>')}K.click(function(){g("forward",false,true)});thumb_container.append(K);var L=0;if(b.thumbnails_direction!=="horizontal"){L=l(F,false);L+=l(J)+l(K);while(L<b.content_height){L+=l(a(D[0]));H++}}else{L=m(F,false);L+=m(J)+m(K);while(L<v){L+=m(a(D[0]));H++}}if(H+1>D.length){if(b.thumbnails_direction!=="horizontal"){thumb_restriction.css("margin-top",l(J))}else{thumb_restriction.css("margin-left",m(J))}J.hide();K.hide()}if(b.thumbnails_direction!=="horizontal"){var M=l(J)+l(K);thumb_restriction.css("height",b.content_height-M-28)}else{var N=m(J)+m(K);thumb_restriction.css("width",v-N)}if(b.thumbnails_direction==="horizontal"){a(".showcase-thumbnail").each(function(){G+=m(a(this))});F.css("width",G)}else{a(".showcase-thumbnail").each(function(){G+=l(a(this))})}}if(b.thumbnails&&b.thumbnails_position.indexOf("outside")!==-1&&b.thumbnails_direction!=="horizontal"&&!b.viewline){u.css("width",v+m(F,true,false))}else if(!b.fit_to_parent){u.css("width",v)}if(E>1&&b.auto){t=window.setInterval(d,b.interval)}if(b.auto&&b.pauseonover){u.mouseenter(function(){r=true;clearInterval(t)});u.mouseleave(function(){if(!s){r=false;t=window.setInterval(d,b.interval)}})}if(b.arrows&&E>1){a(document.createElement("div")).addClass("showcase-arrow-previous").prependTo(u).click(function(){if(t){if(b.stoponclick){s=true}clearInterval(t)}e(p===0?E-1:parseInt(p)-1,"previous")});a(document.createElement("div")).addClass("showcase-arrow-next").prependTo(u).click(function(){if(t){if(b.stoponclick){s=true}clearInterval(t)}e(p+1,"next")});if(b.viewline){$(".showcase-arrow-previous").hide()}}if(b.buttons&&E>1){a(document.createElement("div")).css("clear","both").addClass("showcase-button-wrapper").appendTo(u);i=0;while(i<E){a(document.createElement("span")).attr("id","showcase-navigation-button-"+i).addClass(i===0?"active":"").html(b.btn_numbers?parseInt(i)+1:"&#9679;").click(function(a,c){return function(){if(t){if(b.stoponclick){s=true}clearInterval(t)}e(a,c)}}(i,"")).appendTo(a(u).find(".showcase-button-wrapper"));i++}}if(b.keybord_keys){a(document).keydown(function(a){if(b.stoponclick){s=true}if(t)clearInterval(t);if(a.keyCode===37){e(p===0?E-1:parseInt(p)-1,"previous")}if(a.keyCode===39){e(p===E-1?0:parseInt(p)+1,"next")}})}var O=0;var P=null;if(b.mousetrace){var Q=a(document.createElement("div")).css("position","absolute").css("top","0").css("background-color","#fff").css("color","#000").css("padding","3px 5px").css("x-index","30").html("X: 0 Y: 0");u.append(Q);var R=u.offset();B.mousemove(function(a){Q.html("X: "+(a.pageX-R.left)+" Y: "+(a.pageY-R.top))})}$("#awOnePageButton").click(function(){if($(".view-page").is(":visible")){var d=a(document.createElement("div"));d.addClass("showcase-onepage");u.before(d);if(t){s=true;clearInterval(t)}$(this).find(".view-page").hide();$(this).find(".view-slide").show();u.hide();$.each(C,function(a,e){obj=c(a);obj.css("position","relative");d.append(obj);j(obj);h(obj);if(b.dynamic_height){obj.css("height",obj.find(".showcase-content").children().height())}else{obj.css("height",b.content_height)}});var e=a(document.createElement("div"));e.addClass("clear");d.append(e)}else{$(".showcase-onepage").remove();$(this).find(".view-page").show();$(this).find(".view-slide").hide();u.show()}return false});var S=[];u.removeClass("showcase-load")}})(jQuery)